<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>第2章 数据可视化交互式教程</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>第2章 数据可视化交互式教程</h1>
            <p>基于matplotlib的各种图表类型实现</p>
        </header>

        <nav class="navigation">
            <button class="nav-btn active" data-section="line-chart">2.1 折线图</button>
            <button class="nav-btn" data-section="bar-chart">2.2 柱形图</button>
            <button class="nav-btn" data-section="horizontal-bar">2.3 条形图</button>
            <button class="nav-btn" data-section="area-chart">2.4 堆积面积图</button>
            <button class="nav-btn" data-section="histogram">2.5 直方图</button>
            <button class="nav-btn" data-section="pie-chart">2.6 饼图</button>
            <button class="nav-btn" data-section="scatter-chart">2.7 散点图</button>
            <button class="nav-btn" data-section="box-plot">2.8 箱形图</button>
            <button class="nav-btn" data-section="radar-chart">2.9 雷达图</button>
            <button class="nav-btn" data-section="error-bar">2.10 误差棒图</button>
        </nav>

        <!-- 2.1 折线图 -->
        <section id="line-chart" class="chart-section active">
            <h2>2.1 绘制折线图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例1：未来15天最高气温和最低气温</h3>
                    <div class="control-group">
                        <label>调整温度范围：</label>
                        <input type="range" id="tempRange" min="5" max="15" value="10" />
                        <span id="tempRangeValue">10</span>°C
                    </div>
                    <div class="data-controls">
                        <button onclick="updateLineChart()">更新图表</button>
                        <button onclick="dataEditor.showDataEditor('lineChart')" class="edit-data-btn">编辑数据</button>
                        <button onclick="dataEditor.exportData('lineChart')" class="export-btn">导出数据</button>
                        <button onclick="dataEditor.resetData('lineChart')" class="reset-btn">重置数据</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="lineChartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.2 柱形图 -->
        <section id="bar-chart" class="chart-section">
            <h2>2.2 绘制柱形图或堆积柱形图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例2：阿里巴巴GMV统计</h3>
                    <div class="control-group">
                        <label>图表类型：</label>
                        <select id="barChartType">
                            <option value="normal">普通柱形图</option>
                            <option value="grouped">分组柱形图</option>
                            <option value="stacked">堆积柱形图</option>
                        </select>
                    </div>
                    <div class="data-controls">
                        <button onclick="updateBarChart()">更新图表</button>
                        <button onclick="dataEditor.showDataEditor('barChart')" class="edit-data-btn">编辑数据</button>
                        <button onclick="dataEditor.exportData('barChart')" class="export-btn">导出数据</button>
                        <button onclick="dataEditor.resetData('barChart')" class="reset-btn">重置数据</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="barChartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.3 条形图 -->
        <section id="horizontal-bar" class="chart-section">
            <h2>2.3 绘制条形图或堆积条形图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例3：各商品种类的网购替代率</h3>
                    <div class="control-group">
                        <label>显示数量：</label>
                        <input type="range" id="itemCount" min="5" max="18" value="10" />
                        <span id="itemCountValue">10</span>项
                    </div>
                    <div class="data-controls">
                        <button onclick="updateHorizontalBar()">更新图表</button>
                        <button onclick="dataEditor.showDataEditor('horizontalBar')" class="edit-data-btn">编辑数据</button>
                        <button onclick="dataEditor.exportData('horizontalBar')" class="export-btn">导出数据</button>
                        <button onclick="dataEditor.resetData('horizontalBar')" class="reset-btn">重置数据</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="horizontalBarCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.4 堆积面积图 -->
        <section id="area-chart" class="chart-section">
            <h2>2.4 绘制堆积面积图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例4：物流公司物流费用统计</h3>
                    <div class="control-group">
                        <label>数据波动：</label>
                        <input type="range" id="areaVariation" min="0.5" max="2" step="0.1" value="1" />
                        <span id="areaVariationValue">1.0</span>x
                    </div>
                    <div class="data-controls">
                        <button onclick="updateAreaChart()">更新图表</button>
                        <button onclick="dataEditor.showDataEditor('areaChart')" class="edit-data-btn">编辑数据</button>
                        <button onclick="dataEditor.exportData('areaChart')" class="export-btn">导出数据</button>
                        <button onclick="dataEditor.resetData('areaChart')" class="reset-btn">重置数据</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="areaChartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.5 直方图 -->
        <section id="histogram" class="chart-section">
            <h2>2.5 绘制直方图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例5：随机数据分布</h3>
                    <div class="control-group">
                        <label>数据点数量：</label>
                        <input type="range" id="histogramSamples" min="100" max="1000" step="100" value="500" />
                        <span id="histogramSamplesValue">500</span>
                    </div>
                    <div class="control-group">
                        <label>分组数量：</label>
                        <input type="range" id="histogramBins" min="10" max="50" value="25" />
                        <span id="histogramBinsValue">25</span>
                    </div>
                    <button onclick="updateHistogram()">生成新数据</button>
                </div>
                <div class="chart-container">
                    <canvas id="histogramCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.6 饼图 -->
        <section id="pie-chart" class="chart-section">
            <h2>2.6 绘制饼图或圆环图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例6：支付宝月账单报告</h3>
                    <div class="control-group">
                        <label>图表类型：</label>
                        <select id="pieChartType">
                            <option value="pie">饼图</option>
                            <option value="doughnut">圆环图</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>餐饮美食支出：</label>
                        <input type="range" id="foodExpense" min="500" max="1500" value="1000" />
                        <span id="foodExpenseValue">1000</span>元
                    </div>
                    <div class="data-controls">
                        <button onclick="updatePieChart()">更新图表</button>
                        <button onclick="dataEditor.showDataEditor('pieChart')" class="edit-data-btn">编辑数据</button>
                        <button onclick="dataEditor.exportData('pieChart')" class="export-btn">导出数据</button>
                        <button onclick="dataEditor.resetData('pieChart')" class="reset-btn">重置数据</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="pieChartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.7 散点图 -->
        <section id="scatter-chart" class="chart-section">
            <h2>2.7 绘制散点图或气泡图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例7：汽车速度与制动距离的关系</h3>
                    <div class="control-group">
                        <label>数据点数量：</label>
                        <input type="range" id="scatterPoints" min="10" max="50" value="20" />
                        <span id="scatterPointsValue">20</span>
                    </div>
                    <div class="control-group">
                        <label>显示趋势线：</label>
                        <input type="checkbox" id="showTrendLine" checked />
                    </div>
                    <button onclick="updateScatterChart()">更新图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="scatterChartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.8 箱形图 -->
        <section id="box-plot" class="chart-section">
            <h2>2.8 绘制箱形图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例8：2017年和2018年全国发电量统计</h3>
                    <p>箱形图显示数据的分布情况，包括中位数、四分位数和异常值。</p>
                    <div class="box-plot-container">
                        <div class="box-plot-item">
                            <h4>2018年发电量 (亿千瓦时)</h4>
                            <div class="box-plot-stats">
                                <div>最小值: 5107.8</div>
                                <div>第一四分位数: 5330.2</div>
                                <div>中位数: 5443.3</div>
                                <div>第三四分位数: 6199.9</div>
                                <div>最大值: 6404.9</div>
                            </div>
                        </div>
                        <div class="box-plot-item">
                            <h4>2017年发电量 (亿千瓦时)</h4>
                            <div class="box-plot-stats">
                                <div>最小值: 4605.2</div>
                                <div>第一四分位数: 4947.0</div>
                                <div>中位数: 5168.9</div>
                                <div>第三四分位数: 5698.6</div>
                                <div>最大值: 6047.4</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="boxPlotCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.9 雷达图 -->
        <section id="radar-chart" class="chart-section">
            <h2>2.9 绘制雷达图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例9：霍兰德职业兴趣测试</h3>
                    <div class="control-group">
                        <label>选择测试者：</label>
                        <select id="radarPerson">
                            <option value="0">测试者1</option>
                            <option value="1">测试者2</option>
                            <option value="2">测试者3</option>
                            <option value="3">测试者4</option>
                            <option value="4">测试者5</option>
                            <option value="5">测试者6</option>
                        </select>
                    </div>
                    <button onclick="updateRadarChart()">更新图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="radarChartCanvas"></canvas>
                </div>
            </div>
        </section>

        <!-- 2.10 误差棒图 -->
        <section id="error-bar" class="chart-section">
            <h2>2.10 绘制误差棒图</h2>
            <div class="content-wrapper">
                <div class="controls">
                    <h3>实例10：4个树种不同季节的细根生物量</h3>
                    <div class="control-group">
                        <label>显示误差棒：</label>
                        <input type="checkbox" id="showErrorBars" checked />
                    </div>
                    <button onclick="updateErrorBarChart()">更新图表</button>
                </div>
                <div class="chart-container">
                    <canvas id="errorBarCanvas"></canvas>
                </div>
            </div>
        </section>
    </div>

    <!-- 数据编辑模态框 -->
    <div id="dataEditorModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>数据编辑器</h2>
                <span class="close" onclick="closeDataEditor()">&times;</span>
            </div>
            <div id="dataEditorContent" class="modal-body">
                <!-- 动态内容 -->
            </div>
            <div class="modal-footer">
                <div class="import-export-controls">
                    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="handleFileImport(event)">
                    <button onclick="document.getElementById('importFile').click()" class="import-btn">导入JSON</button>
                    <textarea id="jsonInput" placeholder="或者直接粘贴JSON数据..." class="json-input"></textarea>
                    <button onclick="importFromTextarea()" class="import-text-btn">导入文本</button>
                </div>
                <button onclick="closeDataEditor()" class="close-btn">关闭</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script src="data-editor.js"></script>
    <script src="modal-functions.js"></script>
    <script src="chart-functions-1.js"></script>
    <script src="chart-functions-2.js"></script>
    <script src="chart-functions-3.js"></script>
    <script src="chart-functions-4.js"></script>
</body>
</html>